<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./bower_components/fetch/fetch.js"></script>
  <script type="text/javascript" src="./bower_components/lodash/dist/lodash.js"></script>
  <script type="text/javascript" src="./bower_components/pluralize/pluralize.js"></script>
  <script type="text/javascript" src="./bower_components/validate/validate.js"></script>
  <script type="text/javascript" src="./jsModel.js"></script>
</head>
<body>
  <header class="navbar navbar-static-top navbar-default">
    <div class="container">
      <div class="navbar-header col-md-8">
        <h1>Hermione.js</h1>
      </div>
      <div class="col-md-4">
        <menu class="nav navbar-nav navbar-right">
          <li>
            <a href="https://github.com/hackathon-cognibox-team5/js-model">
              <i class="fa fa-github fa-4x"></i>
            </a>
          </li>
          <li></li>
        </menu>
      </div>
    </div>
  </header>
  <div class="container">
    <div class="col-md-8" id="content">
    </div>
    </div>
  </div>
  <script type="text/javascript">
  (function() {
    var Post = JsModel.extend({
      name: "Post",
      baseUrl: "http://hackathon.cognibox.com/",
      attrs: {
        "id":  {},
        "title": {},
        "body": {},
        "published": {}
      }
    }, {
      // Add functions here
    }, {
      get: function(options) { return this.sync("read", null, options); }
    });
    var post = Post.create({ id: 3});
    Post.fetchAll().then(function (models){
      _.each(models, function(model) {
        $('#content').append(
          '<article>'+
          '<h2>' +
            model.attrs.title.value +
          '</h2>' +
          '<p>' +
            model.attrs.body.value  +
          '</p>' +
          '<a href="' + model.url() + '">' + 'Read more' + '</a>' +
          '</article>');
      });
      }).catch(function (err) {
        $('#content').empty();
        $('#content').append(
          '<div class="row">' +
          '<div class="alert alert-danger alert-dismissible" role="alert">' +
          '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
          '<strong>'+ 'Error: ' +'</strong>' + err.message +
          '</div>' +
          '</div>');
        });
  }());
  </script>
</body>
</html>
